<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Gestion du contrat de travail</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        [v-cloak] {
            display: none;
        }

        body {
            font: 20px/1.3 'Open Sans', sans-serif;
            width: 100%;
            color: #5e5b64;
        }

        h2 {
            text-align: center;
            text-decoration: underline;
        }

        #main {
            border: 1px solid #000000;
            width: 20%;
            margin: auto;
            padding: 20px;

        }

        input[type=date] {
            appearance: none;
            -webkit-appearance: none;
            color: #d8c070;
            font-family: "Helvetica", arial, sans-serif;
            font-size: 18px;
            border: 1px solid #ecf0f1;
            padding: 5px;
            display: inline-block !important;
            visibility: visible !important;
        }

        input[type=number] {
            -moz-appearance: textfield;
            color: #d8c070;
            font-size: 18px;
            border: 1px solid #ecf0f1;
            padding: 5px;
            width: 20px;
        }

        .resultat {
            margin-top: 10vh;
        }
    </style>
</head>

<body>

    <h2>gestion du contrat de travail</h2>

    <div id="main" v-cloak>
        <form v-on:submit.prevent="onSubmit">
            <div>Date de début :
                <input type="date" v-model="dateDebut">
            </div>
            <div>Date de fin :
                <input type="date" v-model="dateFin">
            </div>
            <div>Durée de travail hebdomadaire :
                <input type="number" v-model="dureeTravailHebdo" min="0" max="48">
            </div>
            <button v-on:click="show">Valider</button>
        </form>
        <div v-if="isDisplay" class="resultat">Durée du contrat: {{ Duree() }}<br>
            Congés cummulés: {{ Conges() }}
            <button v-on:click="hide">Cacher</button></div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.5/vue.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js"></script>

    <script>
        moment().format('DD-MM-YYYY');

        var demo = new Vue({
            el: "#main",
            // initialisation des valeurs
            data: {
                isDisplay: false,
                dureeTravailHebdo: "35",
                dateDebut: "",
                dateFin: "",
                dureeContrat: 0,

            },
            // Fonctions utilsées
            methods: {

                //affichage et masquage de la div resultat
                show: function () {
                    this.isDisplay = true;
                },
                hide: function () {
                    this.isDisplay = false;
                },
                //calcul de la durée contrat avec moment.js
                Duree: function () {
                    const debutContrat = moment(this.dateDebut);
                    const finContrat = moment(this.dateFin);

                    var dureeContrat = finContrat.diff(debutContrat, "days");
                    return dureeContrat + " jours soit " + (dureeContrat * 24) + " heures."
;
                },
                Conges: function () {
                    var conges = Math.ceil((this.dureeContrat / 28) * 2.08);
                    return conges + " jours";
                },
            }

        })
    </script>
</body>

</html>